---
title: MÃ¬nh lÃ m Blog nÃ y nhÆ° tháº¿ nÃ o ?
create_date: 07/07/2024
update_date: 07/07/2024
tags: 
    - software
    - study 
draft: true
thumbnail: "/contents/how-to-make-blog/thumbnail.jpg"
---

## LÃ½ do mÃ  mÃ¬nh lÃ m Blog nÃ y

VÃ o nÄƒm nháº¥t mÃ¬nh cÃ³ lÃ m blog báº±ng [Jekyll](https://jekyllrb.com/) vÃ  sau Ä‘Ã³ thÃ¬ mÃ¬nh chuyá»ƒn qua dÃ¹ng [Hugo](https://gohugo.io/). NhÆ°ng mÃ  nghÄ© láº¡i, mÃ¬nh cáº§n cÃ³ thá»© gÃ¬ Ä‘Ã³ cá»§a riÃªng mÃ¬nh, ngoÃ i ra cÅ©ng nhá» viá»‡c mÃ¬nh pháº£i Ä‘á»™ng Ä‘áº¿n front-end á»Ÿ mÃ´n CÃ´ng nghá»‡ pháº§n má»m cho AI vÃ  cÅ©ng lÃ  láº§n Ä‘áº§u tiÃªn mÃ¬nh Ä‘á»™ng Ä‘áº¿n cÃ¡i gá»i lÃ  [React](https://react.dev/) vÃ  má»—i má»™t thá»© (ká»ƒ lÃ  ráº¥t nhá») thÃ¬ cÅ©ng cÃ³ thá»ƒ cáº§n Ä‘áº¿n thÆ° viá»‡n riÃªng (yes, I'm looking at you, Javascript developer). Tháº¿ nhÆ°ng Ä‘Ã¢y váº«n lÃ  thiÃªn thá»i Ä‘á»‹a lá»£i Ä‘á»‘i vá»›i mÃ¬nh, ngáº¡i gÃ¬ khÃ´ng lÃ m má»™t blog cho riÃªng mÃ¬nh.

## Ã tÆ°á»Ÿng

NÃ³i tráº¯ng ra thÃ¬ blog mÃ¬nh Ä‘Ã£ dÃ¹ng Ä‘áº¿n 80% thiáº¿t káº¿ Ä‘áº¿n tá»« trang nÃ y rá»“i [^1] (ráº¥t lÃ  cáº£m Æ¡n luÃ´n ğŸ˜­). LÃºc Ä‘áº§u mÃ¬nh nghÄ© sáº½ thá»±c hiá»‡n trÃªn framework [Astro](https://astro.build/), thÃ¬ cÆ¡ báº£n Ä‘Ã¢y lÃ  má»™t framework Ä‘á»ƒ dÃ¹ng build blog ráº¥t máº¡nh (ngoÃ i ra cÃ¡i xá»‹n nháº¥t lÃ  page transition Ä‘Æ°á»£c build native) tháº¿ nhÆ°ng mÃ¬nh láº¡i khÃ´ng biáº¿t dÃ¹ng (tháº­t ra lÃ  dÃ¹ng khÃ´ng quen) ğŸ¥² nÃªn do Ä‘Ã³ mÃ¬nh quay láº¡i dÃ¹ng framework mÃ  mÃ¬nh Ä‘Ã£ lÃ m á»Ÿ mÃ´n CNPM cho AI Ä‘Ã³ lÃ  [NextJS](https://nextjs.org/) vÃ  lÃ m blog trÃªn NextJS thÃ¬ hÆ¡i cháº­t váº­t tÃ­.

## CÃ¡ch mÃ¬nh lÃ m

MÃ¬nh sáº½ giáº£ sá»­ lÃ  cÃ¡c báº¡n Ä‘Ã£ biáº¿t cÆ¡ báº£n vá» NextJS rá»“i nhÃ©, vÃ­ dá»¥ nhÆ° [App Router](https://nextjs.org/docs/app) (nÃ³i chung lÃ  NextJS máº¡nh vÃ  dá»… dÃ¹ng, dÃ¹ng sai thÃ¬ shoot yourself on the foot thÃ´i ğŸ˜ˆ, vá»›i láº¡i do mÃ¬nh chá»‰ biáº¿t duy nháº¥t framework nÃ y nÃªn cháº¯c cháº¯n bias nÃ³ rá»“i).

TrÆ°á»›c tiÃªn lÃ  nÃ³i vá» nhá»¯ng gÃ¬ mÃ¬nh dÃ¹ng:
- NextJS: yeah sure cháº¯c cháº¯n lÃ  nhÆ° váº­y rá»“i. VÃ  Ä‘á»ƒ update má»›i nháº¥t, mÃ¬nh dÃ¹ng NextJS 14.2 vÃ  App Router.
- [next-mdx-remote](https://github.com/hashicorp/next-mdx-remote): Ä‘Ã¢y lÃ  má»™t thÆ° viá»‡n dÃ¹ng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c file [MDX](https://mdxjs.com/) (nÃ³ lÃ  markdown nhÆ°ng cÃ¡c báº¡n cÃ³ thá»ƒ thÃªm react component vÃ o áº¥y).
- MÃ¬nh khÃ´ng dÃ¹ng database nÃ o Ä‘á»ƒ lÆ°u post vÃ  lÆ°u tháº³ng nÃ³ cÃ¹ng vá»›i code, Ä‘iá»u nÃ y cÃ³ Ä‘iá»ƒm tá»‘t lÃ  dá»… lÃ m vÃ  Ä‘iá»ƒm khÃ´ng tá»‘t lÃ  khÃ´ng scale Ä‘Æ°á»£c, mÃ¬nh nghÄ© khi nÃ o sá»‘ lÆ°á»£ng post cá»§a mÃ¬nh nhiá»u, maybe 100 cÃ¡i ğŸ¤·â€â™‚ï¸ thÃ¬ mÃ¬nh sáº½ chuyá»ƒn sang dÃ¹ng database (Ã  ngoÃ i ra táº¡i mÃ¬nh khÃ´ng biáº¿t lÃ m).
- NhÆ° cÃ¡c báº¡n tháº¥y tÃªn miá»n cÃ³ pháº§n `vercel.app` thÃ¬ mÃ¬nh deploy cÃ¡i blog nÃ y trÃªn [Vercel](https://vercel.com), cÃ¡i nÃ y dá»… dÃ¹ng, mÃ¬nh áº¥n 1-2 click lÃ  xong.
- CÃ²n vá» UI, thÃ¬ mÃ¬nh sá»­ dá»¥ng [TailwindCSS](https://tailwindcss.com/) (chá»§ yáº¿u lÃ  chÃ©p tá»« [^1] thÃ´i) vÃ  khÃ´ng thá»ƒ thiáº¿u lÃ  vá»‹ Ã¢n nhÃ¢n cá»§a mÃ¬nh, thÆ° viá»‡n [shadcn/ui](https://ui.shadcn.com/) (cÃ¡c button, link, animation gÃ¬ Ä‘Ã³ Ä‘á»u Ä‘Æ°á»£c mÃ¬nh láº¥y tá»« thÆ° viá»‡n nÃ y háº¿t).
- NgoÃ i ra cÃ²n ráº¥t nhiá»u cÃ¡i láº·t váº·t khÃ¡c, mÃ¬nh sáº½ nÃ³i á»Ÿ pháº§n sau nhÃ©.

### Xá»­ lÃ½ file MDX nhÆ° tháº¿ nÃ o ?

Content mÃ  cÃ¡c báº¡n tháº¥y trong post nÃ y, hoÃ n toÃ n Ä‘Æ°á»£c viáº¿t báº±ng MDX vÃ  mÃ¬nh cáº§n tÃ¬m má»™t cÃ¡ch Ä‘á»ƒ xá»­ lÃ½ Ä‘Æ°á»£c file MDX áº¥y, rá»“i Ä‘Æ°a lÃªn web vÃ  cÃ²n pháº§n quan trá»ng, cÃ¡ch xá»­ lÃ½ pháº£i phÃ¹ há»£p vá»›i NextJS. 

- Má»™t file mdx cá»§a mÃ¬nh (á»Ÿ post nÃ y) sáº½ nhÆ° tháº¿ nÃ y. ToÃ n bá»™ pháº§n dÆ°á»›i dáº¥u `---` lÃ  nÆ¡i Ä‘á»ƒ viáº¿t, cÃ²n trÃªn Ä‘Ã³ lÃ  metadata.
```mdx showLineNumbers
---
title: MÃ¬nh lÃ m Blog nÃ y nhÆ° tháº¿ nÃ o ?
create_date: 07/07/2024
update_date: 07/07/2024
tags: 
    - software
    - study 
draft: true
thumbnail: "/contents/how-to-make-blog/thumbnail.jpg"
---

## LÃ½ do mÃ  mÃ¬nh lÃ m Blog nÃ y
```

- Äáº§u tiÃªn mÃ¬nh pháº£i Ä‘á»c vÃ  parse Ä‘Æ°á»£c file mdx áº¥y, Ä‘á»ƒ tÃ¡ch nÃ³ ra thÃ nh string, sau Ä‘Ã³ má»›i Ä‘Æ°a cho `next-mdx-remote` xá»­ lÃ½ string áº¥y. MÃ¬nh dÃ¹ng thÆ° viá»‡n [globby](https://www.npmjs.com/package/globby) Ä‘á»ƒ Ä‘á»c file (ngoÃ i ra cÃ¡i quan trá»ng lÃ  nÃ³ Ä‘á»c Ä‘Æ°á»£c cáº£ trong subdirectory). Sau khi Ä‘á»c mÃ¬nh sáº½ láº¥y tÃªn file, láº¥y content vÃ  metadata cá»§a file (hay cÃ²n gá»i lÃ  front-matter) báº±ng thÆ° viá»‡n [gray-matter](https://www.npmjs.com/package/gray-matter).

```ts showLineNumbers
/* read all files have .mdx extension */
const articles = await globby(ArticlePath("**/*.mdx"));

return Promise.all(
    articles.map(async (file) => {
        const fileName = file.split("/").at(-1)?.split(".")[0];
        const fileContent = await fs.readFile(file, "utf8");

        // get file title, created_date, etc and file content
        const {data, content} = matter(fileContent);

        return {...data, body: content, name: fileName} as IArticle;
    })
)
```

- Sau khi Ä‘Ã£ cÃ³ content cá»§a file, viá»‡c tiáº¿p theo lÃ  mÃ¬nh sáº½ Ä‘Æ°a cho thÆ° viá»‡n `next-mdx-remote` xá»­ lÃ½. Khi xá»­ lÃ½ file MDX, `next-mdx-remote` sáº½ tráº£ vá» HTML, ta xem Ä‘Ã³ nhÆ° lÃ  má»™t component, vÃ¬ váº­y chá»‰ cáº§n gá»i á»Ÿ nÆ¡i mÃ  ta muá»‘n post Ä‘Æ°á»£c display.

```ts showLineNumbers
import { MDXRemote } from "next-mdx-remote/rsc";
import { MdxComponent } from "../mdx";
import { cn } from "@/lib/utils";

import rehypeKatex from 'rehype-katex';
import remarkMath from 'remark-math';
import remarkGfm from "remark-gfm";
import remarkBreaks from "remark-breaks";
import rehypePrettyCode from "rehype-pretty-code";
import rehypeSlug from "@/lib/other/slug";

interface BlogContentProps {
    content: string,
    className?: string
}

export default async function BlogContent({
    content, 
    className
} : BlogContentProps) {
    return (
        <article className={cn("flex-grow break-words prose", className)}>
            <MDXRemote 
                source={content}
                components={{ ...MdxComponent }}
                options={{
                    mdxOptions: {
                        remarkPlugins: [
                            remarkBreaks, 
                            remarkGfm, 
                            remarkMath
                        ],
                        rehypePlugins: [
                            rehypeSlug, 
                            rehypeKatex, 
                            [rehypePrettyCode, {}]
                        ],
                    },
                }}
            />
        </article>
    )
}
```

> Tháº¿ nhÆ°ng nhÆ° tháº¿ váº«n chÆ°a Ä‘á»§ Ä‘Ã¢u.

- Äáº§u tiÃªn viá»‡c format (hay style), vÃ­ dá»¥ nhÆ° Heading 1, á»Ÿ MDX sáº½ lÃ  `#` cÃ²n HTML sáº½ lÃ  `h1`, hoáº·c tÆ°Æ¡ng tá»± nhÆ° `h2`, `a`, ... thÃ¬ `next-mdx-remote` sáº½ khÃ´ng tá»± Ä‘á»™ng xá»­ lÃ½ cho mÃ¬nh, sáº½ cÃ³ 2 cÃ¡ch Ä‘á»ƒ thá»±c hiá»‡n Ä‘Ã³ lÃ  tá»± xá»­ lÃ½ ğŸ¥² hoáº·c dÃ¹ng thÆ° viá»‡n [tailwindcss-typography](https://github.com/tailwindlabs/tailwindcss-typography), khi Ä‘Ã³ mÃ¬nh chá»‰ cáº§n thÃªm `prose` vÃ o pháº§n `className`, toÃ n bá»™ file MDX (hay nÃ³i Ä‘Ãºng lÃ  HTML) cá»§a mÃ¬nh sáº½ Ä‘Æ°á»£c xá»­ lÃ½ háº¿t (nÃ³ lÃ  style mÃ  cÃ¡c báº¡n Ä‘ang nhÃ¬n Ã­).

- Tiáº¿p theo cÃ³ thá»ƒ tháº¥y 2 thá»© lÃ  [remark](https://github.com/remarkjs/remark) vÃ  [rehype](https://github.com/rehypejs/rehype) á»Ÿ pháº§n `mdxOptions`. ThÃ¬ `remark` sáº½ lÃ  thÆ° viá»‡n Ä‘á»ƒ xá»­ lÃ½ trÃªn file Mardown (hay MDX) cÃ²n `rehype` sáº½ lÃ  thÆ° viá»‡n Ä‘á»ƒ xá»­ lÃ½ trÃªn HTML, váº­y cÃ³ nghÄ©a lÃ , `next-mdx-remote` sáº½ thá»±c hiá»‡n `remark` trÆ°á»›c sau Ä‘Ã³ Ä‘áº¿n `rehype`.

- CÃ¡c plugin remark mÃ  mÃ¬nh sá»­ dá»¥ng bao gá»“m [remark-breaks](https://github.com/remarkjs/remark-breaks), plugin nÃ y Ä‘Æ¡n giáº£n lÃ  break cÃ¡c Ä‘oáº¡n vÄƒn báº£n (kiá»ƒu cÃ¡ch dÃ²ng jjáº¥y), [remark-gfm](https://github.com/remarkjs/remark-gfm) dÃ¹ng Ä‘á»ƒ style table nhÆ° á»Ÿ [Testing MDX](/blog/test1) vÃ  cáº£ footnote (vÃ  cÃ²n nhiá»u cÃ¡i ná»¯a mÃ  mÃ¬nh chÆ°a dÃ¹ng Ä‘áº¿n). Cuá»‘i cÃ¹ng lÃ  [remark-math](https://github.com/remarkjs/remark-math), nhÆ° cÃ¡i tÃªn cá»§a nÃ³ thÃ¬ plugin nÃ y giÃºp hiá»ƒn thá»‹ Ä‘Æ°á»£c cÃ¡c cÃ´ng thá»©c toÃ¡n báº±ng $\LaTeX$, ngoÃ i ra nÃ³ pháº£i Ä‘i kÃ¨m vá»›i má»™t plugin ná»¯a Ä‘á»ƒ hiá»ƒn thá»‹ Ä‘Ãºng, á»Ÿ Ä‘Ã¢y lÃ  [rehype-katex](https://github.com/remarkjs/remark-math/tree/main/packages/rehype-katex).

- CÃ²n vá» rehype, mÃ¬nh dÃ¹ng [rehype-pretty-code](https://rehype-pretty.pages.dev/) Ä‘á»ƒ táº¡o cÃ¡c block highlight code nhÆ° cÃ¡c báº¡n tháº¥, [rehype-slug](https://github.com/rehypejs/rehype-slug) Ä‘á»ƒ gÃ¡n id cho cÃ¡c header, do Ä‘Ã³ khi cÃ¡c báº¡n báº¥m Table of Contents thÃ¬ nÃ³ má»›i di chuyá»ƒn Ä‘áº¿n Ä‘Ãºng header Ä‘Æ°á»£c (mÃ¬nh cÃ³ sá»­a láº¡i má»™t chÃºt theo Ã½ mÃ¬nh Ä‘á»ƒ phÃ¹ há»£p vá»›i tiáº¿ng Viá»‡t).

```ts showLineNumbers
import MdxImage from "./image"
import MdxMathBlock from "./math-block"
import MdxSidenote from "./sidenote"
import MdxYoutube from "./youtube"

export const MdxComponent = {
    MdxYoutube,
    MdxImage,
    MdxSidenote,
    MdxMathBlock
}
```

- Pháº§n hay ná»¯a Ä‘Ã³ chÃ­nh lÃ  mÃ¬nh hoÃ n toÃ n cÃ³ thá»ƒ dÃ¹ng React Component (jsx hoáº·c tsx) trong MDX báº±ng cÃ¡ch thÃªm vÃ o á»Ÿ option `components` trong `MDXRemote` component. CÃ¡c MDX mÃ  mÃ¬nh sá»­ dá»¥ng thÃ¬ cÃ¡c báº¡n cÃ³ thá»ƒ tháº¥y á»Ÿ Ä‘oáº¡n code trÃªn. VÃ­ dá»¥ nhÆ° mÃ¬nh dÃ¹ng `<MdxYoutube />` Ä‘á»ƒ embed video, hay `<MdxMathBlock />` Ä‘á»ƒ táº¡o cÃ¡c block math nhÆ° Definition, Theorem, ... nhÆ° dÆ°á»›i Ä‘Ã¢y.

```mdx
<MdxMathBlock type="theorem">
BÃ¬nh phÆ°Æ¡ng cáº¡nh huyá»n báº±ng tá»•ng bÃ¬nh phÆ°Æ¡ng hai cáº¡nh gÃ³c vuÃ´ng. Hay,
$$
a^2 = b^2 + c^2
$$
vá»›i $a$ lÃ  cáº¡nh huyá»n, $b$ vÃ  $c$ lÃ  hai cáº¡nh gÃ³c vuÃ´ng.
</MdxMathBlock>
```

<MdxMathBlock type="theorem">
BÃ¬nh phÆ°Æ¡ng cáº¡nh huyá»n báº±ng tá»•ng bÃ¬nh phÆ°Æ¡ng hai cáº¡nh gÃ³c vuÃ´ng. Hay,
$$
a^2 = b^2 + c^2
$$
vá»›i $a$ lÃ  cáº¡nh huyá»n, $b$ vÃ  $c$ lÃ  hai cáº¡nh gÃ³c vuÃ´ng.
</MdxMathBlock>

- Cool ha, viá»‡c sá»­ dá»¥ng Ä‘Æ°á»£c React Component nÃªn mÃ¬nh cáº£m giÃ¡c nhÃ©t gÃ¬ vÃ o cÅ©ng Ä‘Æ°á»£c ğŸ¤£ (nhÆ°ng Ä‘á»§ kháº£ nÄƒng lÃ m khÃ´ng, khÃ´ng). Hay mÃ¬nh cÃ³ thá»ƒ embed video youtube vÃ o.

```mdx
<MdxYoutube
  src="VR9wmlmD2SA"
  title="Gotta Lock In"
  caption="Gotta Lock In"
/>
```

<MdxYoutube
  src="VR9wmlmD2SA"
  title="Gotta Lock In"
  caption="Gotta Lock In"
/>

### Implement má»™t sá»‘ cÃ¡i bÃªn lá»

> MÃ¬nh lÆ°á»i viáº¿t nÃªn Ä‘á»£i thÃ´i ğŸš§

### CÃ¡c chá»©c nÄƒng cáº§n thÃªm

- [ ] Add Google Analytics and Search Console.
- [ ] Add SEO.
- [x] Better Table of Contents (maybe náº±m á»Ÿ bÃªn pháº£i or trÃ¡i).
- [ ] Post Search.
- [ ] Page transition (cÃ¡i nÃ y NextJS khÃ´ng support native nÃªn khoai Ã¡c ğŸ˜­, hiá»‡n táº¡i mÃ¬nh cÃ³ lÃ m nhÆ°ng nhÃ¬n lÃ´m cÃ´m quÃ¡, page Ä‘Æ°á»£c page khÃ´ng).
- [ ] Pagination.
- [ ] View Counter (kiá»ƒu xem cÃ³ bao nhiÃªu ngÆ°á»i xem post mÃ¬nh rá»“i, maybe I don't need it because it's always 0).
- [ ] Post Comment.
- [ ] DÃ¹ng database.
- [ ] Improve MDX Loading Time (cháº¯c pháº£i Ä‘á»•i thÆ° viá»‡n hoáº·c skill issues ğŸ˜).

[^1]: https://astro-theme-resume.vercel.app/